# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Embedding –º–æ–¥–µ–ª–∏ –¥–æ text-embedding-3-large

## –ò–∑–º–µ–Ω–µ–Ω–∏–µ
Embedding –º–æ–¥–µ–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å `text-embedding-3-small` –Ω–∞ `text-embedding-3-large` –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞.

## ‚úÖ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –í .env:
```bash
# –ë—ã–ª–æ
RAG_EMBEDDING_MODEL=text-embedding-3-small

# –°—Ç–∞–ª–æ  
RAG_EMBEDDING_MODEL=text-embedding-3-large
```

### –í CLAUDE.md:
- –û–±–Ω–æ–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ embedding –º–æ–¥–µ–ª–∏ –Ω–∞ "highest quality embeddings"
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ text-embedding-3-large

- **üéØ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ**: –ù–∞–∏–ª—É—á—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **üìä –ë–æ–ª—å—à–µ –∏–∑–º–µ—Ä–µ–Ω–∏–π**: 3072 –∏–∑–º–µ—Ä–µ–Ω–∏—è vs 1536 —É small –≤–µ—Ä—Å–∏–∏
- **üîç –õ—É—á—à–µ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**: –ë–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –Ω—é–∞–Ω—Å–æ–≤ —Ç–µ–∫—Å—Ç–∞
- **üìà –£–ª—É—á—à–µ–Ω–Ω—ã–π RAG**: –ë–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å
- `text-embedding-3-small`: $0.00002 / 1K tokens
- `text-embedding-3-large`: $0.00013 / 1K tokens (~6.5x –¥–æ—Ä–æ–∂–µ)

**–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ**: –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∑–∞ —É–º–µ—Ä–µ–Ω–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏.

## üöÄ –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å

### –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:
```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ
python update_embedding_to_large.py

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
docker restart lightrag-api
```

### –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:
```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec -it lightrag-api bash -c "
export RAG_EMBEDDING_MODEL=text-embedding-3-large
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
pkill -f uvicorn
"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
docker exec -it lightrag-api printenv RAG_EMBEDDING_MODEL

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ª–æ–≥–∞—Ö –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
docker logs lightrag-api | grep embedding
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –í –ø–æ–∏—Å–∫–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
- **–õ—É—á—à–µ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å–∏–Ω–æ–Ω–∏–º–æ–≤** –∏ –±–ª–∏–∑–∫–∏—Ö –ø–æ —Å–º—ã—Å–ª—É —Å–ª–æ–≤
- **–ë–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ** —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞  
- **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å** –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–õ—É—á—à–∞—è —Ä–∞–±–æ—Ç–∞ —Å –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º**

### –í RAG –æ–ø–µ—Ä–∞—Ü–∏—è—Ö:
- –ë–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤
- –õ—É—á—à–µ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- –ë–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω**: Embedding –º–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
2. **–ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è**: –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–æ–∏–º–æ—Å—Ç–∏**: –°–ª–µ–¥–∏—Ç–µ –∑–∞ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ–º –∑–∞—Ç—Ä–∞—Ç –Ω–∞ embedding
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ú–æ–¥–µ–ª—å large –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —á—É—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ

## üîÑ –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç –Ω–æ–≤–æ–π embedding –º–æ–¥–µ–ª–∏:

```bash
# –û—á–∏—Å—Ç–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã
curl -X POST http://localhost:8000/documents/ingest/clear \
  -H "Authorization: Bearer YOUR_TOKEN"

# –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã  
docker exec -it lightrag-api python tools/ingest_local.py \
  --directory /app/documents/raw_uploads
```

## üìà –ò–∑–º–µ—Ä–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏–π

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–æ–∂–Ω–æ –æ—Ü–µ–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —á–µ—Ä–µ–∑:
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ `/documents/search`
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–æ–≤ –≤ `/chat`
- –ê–Ω–∞–ª–∏–∑ –º–µ—Ç—Ä–∏–∫ –∫–∞—á–µ—Å—Ç–≤–∞ RAG –æ–ø–µ—Ä–∞—Ü–∏–π

---

**–ò—Ç–æ–≥**: –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞–∏–ª—É—á—à—É—é embedding –º–æ–¥–µ–ª—å OpenAI –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ RAG –æ–ø–µ—Ä–∞—Ü–∏–π.