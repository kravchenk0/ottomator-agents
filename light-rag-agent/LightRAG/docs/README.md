# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è LightRAG (Index)

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞, –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω–Ω—É—é –∏–∑ –∫–æ—Ä–Ω—è –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è.

## üìö –ë—ã—Å—Ç—Ä—ã–π –∏–Ω–¥–µ–∫—Å

| –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–∞—Ç–µ–≥–æ—Ä–∏—è |
|----------|----------|-----------|
| [README_IMPROVED.md](README_IMPROVED.md) | –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, —Å—Ü–µ–Ω–∞—Ä–∏–∏ | –û—Å–Ω–æ–≤–Ω–æ–µ |
| [QUICK_START.md](QUICK_START.md) | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —à–∞–≥–∏ –∑–∞–ø—É—Å–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ | –°—Ç–∞—Ä—Ç |
| [LOVABLE_INTEGRATION.md](LOVABLE_INTEGRATION.md) | –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ –≤ –≤–µ–± / —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —á–∞—Ç | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| [AWS_QUICK_START.md](AWS_QUICK_START.md) | 10‚Äë–º–∏–Ω—É—Ç–Ω—ã–π AWS –∑–∞–ø—É—Å–∫ | Deployment |
| [AWS_DEPLOYMENT.md](AWS_DEPLOYMENT.md) | –ü–æ–¥—Ä–æ–±–Ω—ã–π AWS –≥–∞–π–¥ (Docker/Terraform) | Deployment |
| [MIGRATION_GUIDE.md](MIGRATION_GUIDE.md) | –ü–µ—Ä–µ—Ö–æ–¥ —Å–æ —Å—Ç–∞—Ä–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã | –ú–∏–≥—Ä–∞—Ü–∏—è |
| [IMPROVEMENTS_SUMMARY.md](IMPROVEMENTS_SUMMARY.md) | –°–≤–æ–¥–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π –∏ –≤—ã–≥–æ–¥—ã | –û–±–∑–æ—Ä |

## üîç –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á—Ç–µ–Ω–∏—è
1. QUICK_START.md ‚Äî –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
2. README_IMPROVED.md ‚Äî –ø–æ–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
3. LOVABLE_INTEGRATION.md ‚Äî –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –∏–ª–∏ —Å–∞–π—Ç—É
4. AWS_QUICK_START.md ‚Üí AWS_DEPLOYMENT.md ‚Äî –≤—ã–≤–µ—Å—Ç–∏ –≤ –æ–±–ª–∞–∫–æ
5. MIGRATION_GUIDE.md ‚Äî –µ—Å–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç–µ—Å—å
6. IMPROVEMENTS_SUMMARY.md ‚Äî –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å

## üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞ (–∫—Ä–∞—Ç–∫–æ)
```
LightRAG/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ core/      # RAGConfig, RAGManager, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ agent/     # Pydantic AI –∞–≥–µ–Ω—Ç (–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç retrieval)
‚îÇ   ‚îú‚îÄ‚îÄ api/       # FastAPI —Å–µ—Ä–≤–µ—Ä (server.py)
‚îÇ   ‚îî‚îÄ‚îÄ utils/     # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞, performance
‚îú‚îÄ‚îÄ monkey_patch_lightrag.py  # runtime patch LightRAG.get_vector_context
‚îú‚îÄ‚îÄ docs/          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–≤—ã –∑–¥–µ—Å—å)
‚îú‚îÄ‚îÄ *.py (shim)    # –í—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å ‚Üí app.*
‚îî‚îÄ‚îÄ documents/ # –†–∞–±–æ—á–∏–µ –¥–∞–Ω–Ω—ã–µ / –∏–Ω–¥–µ–∫—Å—ã
```

## ‚ôªÔ∏è –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
Shim-—Ñ–∞–π–ª—ã (`common.py`, `api_server.py`, –∏ –¥—Ä.) –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏. –ù–æ–≤—ã–π –∫–æ–¥ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–∞–ø—Ä—è–º—É—é –∏–∑ `app.*`. –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≥—Ä–∞—Ñ–∏–∫ —É–¥–∞–ª–µ–Ω–∏—è –≤ CHANGELOG (TODO).

## ü§ù –í–∫–ª–∞–¥
1. –§–æ—Ä–∫ –∏ –≤–µ—Ç–∫–∞ `feature/<topic>`
2. –ò–∑–º–µ–Ω–µ–Ω–∏—è + —Ç–µ—Å—Ç / –ø—Ä–∏–º–µ—Ä
3. PR —Å –∫—Ä–∞—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

## üß™ –ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
```bash
curl -s http://localhost:8000/health | jq
python rag_agent.py --question "ping"
```

## üó∫ –ù–∞–≤–∏–≥–∞—Ü–∏—è
–ï—Å–ª–∏ –≤—ã –≤–ø–µ—Ä–≤—ã–µ –∑–¥–µ—Å—å ‚Äî –Ω–∞—á–Ω–∏—Ç–µ —Å [QUICK_START.md](QUICK_START.md). –î–ª—è –≥–ª—É–±–∏–Ω—ã ‚Äî [README_IMPROVED.md](README_IMPROVED.md). –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ ‚Äî AWS –¥–æ–∫—É–º–µ–Ω—Ç—ã.

---
–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞: –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤.

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–°–µ—Ä–≤–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç JWT.

–í–∫–ª—é—á–µ–Ω–∏–µ:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç: `export RAG_JWT_SECRET=supersecret`
2. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –°—Ä–æ–∫ –∂–∏–∑–Ω–∏: `export RAG_JWT_EXPIRE_SECONDS=7200`
3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: `export RAG_ALLOWED_USERS=alice,bob`
4. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–æ–ª–∏: `export RAG_ALLOWED_ROLES=admin,user,viewer`
5. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –†–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `export RAG_DEFAULT_ROLE=user`
6. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ä–æ–ª–∏ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º: `export RAG_ROLE_MAP_JSON='{"alice":"admin","bob":"viewer"}'`

–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:
```bash
curl -X POST http://localhost:8000/auth/token \
  -H 'Content-Type: application/json' \
  -d '{"user":"alice","role":"admin"}'
```
–û—Ç–≤–µ—Ç: `{ "access_token": "<JWT>", "token_type": "bearer", "role": "admin" }`

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```bash
curl -H "Authorization: Bearer <JWT>" http://localhost:8000/chat \
  -H 'Content-Type: application/json' \
  -d '{"message":"ping"}'
```

–ü–æ–≤–µ–¥–µ–Ω–∏–µ:
- –ï—Å–ª–∏ `RAG_JWT_SECRET` –Ω–µ –∑–∞–¥–∞–Ω ‚Üí –æ—Ç–∫—Ä—ã—Ç—ã–π —Ä–µ–∂–∏–º (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- –ï—Å–ª–∏ `RAG_ALLOWED_USERS` –∑–∞–¥–∞–Ω ‚Üí —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ `sub`
- –ï—Å–ª–∏ `RAG_ALLOWED_ROLES` –∑–∞–¥–∞–Ω ‚Üí —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ —Ä–æ–ª–∏ (default / mapped / –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–∞—è –¥–æ–ª–∂–Ω–∞ –≤—Ö–æ–¥–∏—Ç—å)
- –¢–æ–∫–µ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç: `sub`, `role`, `iat`, `exp`, `iss`

–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
- –ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ 32+ —Å–∏–º–≤–æ–ª–∞ —Å–µ–∫—Ä–µ—Ç (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä —Å–µ–∫—Ä–µ—Ç–æ–≤)
- –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ RS256 (–ø–∞—Ä–∞ –∫–ª—é—á–µ–π) ‚Üí —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ TODO
- –î–æ–±–∞–≤—å—Ç–µ —Ä–æ—Ç–∞—Ü–∏—é —Ç–æ–∫–µ–Ω–æ–≤ (refresh) –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø

–£–¥–∞–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –æ–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ ‚Äî —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–∫–µ–Ω—ã —Å—Ç–∞–Ω—É—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ.
